<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B-win Matches - Expert Football Predictions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 3rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #f0f0f0;
        }

        .premium-ticket {
            background: #fff;
            max-width: 400px;
            margin: 0 auto 40px;
            padding: 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            border-radius: 0;
        }

        .premium-ticket::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(45deg, transparent 0%, transparent 45%, #fff 45%, #fff 55%, transparent 55%, transparent 100%);
            background-size: 20px 20px;
            background-repeat: repeat-x;
        }

        .premium-ticket::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(45deg, transparent 0%, transparent 45%, #fff 45%, #fff 55%, transparent 55%, transparent 100%);
            background-size: 20px 20px;
            background-repeat: repeat-x;
        }

        .receipt-content {
            padding: 30px 25px;
            color: #000;
            font-family: 'Courier New', monospace;
        }

        .receipt-header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px dashed #000;
            padding-bottom: 20px;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #000;
            margin-bottom: 5px;
            text-shadow: none;
        }

        .receipt-header h2 {
            color: #000;
            font-size: 1.2rem;
            text-shadow: none;
            margin-bottom: 10px;
            font-weight: normal;
        }

        .receipt-header .date {
            background: none;
            padding: 0;
            border-radius: 0;
            display: block;
            color: #000;
            font-weight: normal;
            font-size: 0.9rem;
        }

        .receipt-id {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.8rem;
            color: #666;
        }

        .receipt-match {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #ccc;
            font-size: 0.9rem;
        }

        .receipt-match:last-child {
            border-bottom: none;
        }

        .receipt-teams {
            flex: 1;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8rem;
        }

        .receipt-prediction {
            background: #000;
            color: #fff;
            padding: 3px 8px;
            font-size: 0.7rem;
            margin: 0 10px;
            border-radius: 3px;
            font-weight: bold;
        }

        .receipt-odds {
            font-weight: bold;
            color: #000;
            font-size: 0.9rem;
        }

        .receipt-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #000;
            text-align: center;
        }

        .receipt-total-label {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .receipt-total-odds {
            font-size: 2rem;
            font-weight: bold;
            color: #000;
            margin-bottom: 10px;
        }

        .receipt-footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #000;
            text-align: center;
            font-size: 0.8rem;
            color: #666;
        }

        .buy-button {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .buy-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        .other-predictions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .other-predictions h3 {
            color: #fff;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .prediction-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .prediction-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .prediction-card:hover {
            transform: translateY(-5px);
        }

        .loading {
            text-align: center;
            color: #fff;
            font-size: 1.5rem;
            margin: 50px 0;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .info-section h3 {
            color: #fff;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .info-section p {
            color: #f0f0f0;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature h4 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .feature p {
            color: #f0f0f0;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .ticket-header h2 {
                font-size: 1.8rem;
            }
            
            .match-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .buy-button {
                padding: 15px 30px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚽ B-win Matches</h1>
            <p>Expert Football Predictions & Statistical Analysis</p>
        </div>

        <div class="premium-ticket">
            <div class="receipt-content">
                <div class="receipt-header">
                    <div class="logo">B-WIN</div>
                    <h2>PREMIUM FIXED SLIP</h2>
                    <div class="date" id="currentDate"></div>
                </div>
                
                <div class="receipt-id">
                    TICKET ID: BWN-<span id="ticketId"></span>
                </div>
                
                <div id="receiptMatches">
                    <div class="loading" style="color: #000;">
                        <div class="spinner" style="border-color: #ccc; border-top-color: #000;"></div>
                        <p>Loading today's fixed slip...</p>
                    </div>
                </div>
                
                <div class="receipt-total">
                    <div class="receipt-total-label">TOTAL ODDS</div>
                    <div class="receipt-total-odds" id="totalOdds">50.00</div>
                    <div style="font-size: 0.8rem; color: #666;">ACCUMULATOR BET</div>
                </div>
                
                <div class="receipt-footer">
                    <p>* Predictions based on statistical analysis</p>
                    <p>* No guarantee of winning</p>
                    <p>* Bet responsibly</p>
                </div>
            </div>
        </div>
        
        <a href="https://wa.me/17732362274?text=Hi! I saw your premium betting slip and I'm interested in getting the predictions for today's matches. Can you share the premium tips?" class="buy-button">
            🔥 BUY FIXED SLIP
        </a>

        <div class="other-predictions">
            <h3>📊 All Today's Predictions</h3>
            <div class="prediction-list" id="allPredictions">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading match predictions...</p>
                </div>
            </div>
            
            <a href="https://wa.me/17732362274?text=Hello! I'd like to know more about your prediction services and how your analysis works." class="buy-button">
                📱 Contact for More Predictions
            </a>
        </div>

        <div class="info-section">
            <h3>🎯 How Our Predictions Work</h3>
            <p>At B-win Matches, we use advanced statistical analysis and data-driven approaches to provide you with the most accurate football predictions. Our team analyzes team performance, historical data, player statistics, and current form to generate reliable predictions.</p>
            
            <p>We believe in transparency and honesty. Our predictions are based on thorough analysis, not guarantees. Football is unpredictable, which is what makes it exciting! We provide you with the best possible insights to help inform your decisions.</p>
            
            <div class="features">
                <div class="feature">
                    <h4>📈 Statistical Analysis</h4>
                    <p>Deep dive into team performance, head-to-head records, and current form</p>
                </div>
                <div class="feature">
                    <h4>🔍 Expert Research</h4>
                    <p>Our analysts study injury reports, tactical setups, and team news</p>
                </div>
                <div class="feature">
                    <h4>📊 Data-Driven</h4>
                    <p>Using real-time data from reliable sources for accurate predictions</p>
                </div>
                <div class="feature">
                    <h4>💬 Direct Support</h4>
                    <p>Get personalized advice and explanations via WhatsApp</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_TOKEN = 'd0fdc3856cd14b9a856ab1b473b0f12d';
        const WHATSAPP_NUMBER = '17732362274';

        // Set current date and ticket ID
        const now = new Date();
        document.getElementById('currentDate').textContent = now.toLocaleDateString('en-GB', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Generate random ticket ID
        const ticketId = Math.random().toString(36).substr(2, 9).toUpperCase();
        document.getElementById('ticketId').textContent = ticketId;

        // Mock prediction generator
        function generatePrediction(match) {
            const predictions = ['1', 'X', '2', 'BTTS', 'Over 2.5', 'Under 2.5'];
            const predictionTexts = {
                '1': 'Home Win',
                'X': 'Draw',
                '2': 'Away Win',
                'BTTS': 'Both Teams to Score',
                'Over 2.5': 'Over 2.5 Goals',
                'Under 2.5': 'Under 2.5 Goals'
            };
            
            const randomPrediction = predictions[Math.floor(Math.random() * predictions.length)];
            return {
                code: randomPrediction,
                text: predictionTexts[randomPrediction],
                confidence: Math.floor(Math.random() * 30) + 70 // 70-99% confidence
            };
        }

        // Generate mock odds
        function generateOdds() {
            return {
                home: (Math.random() * 3 + 1.5).toFixed(2),
                draw: (Math.random() * 2 + 2.5).toFixed(2),
                away: (Math.random() * 3 + 1.5).toFixed(2)
            };
        }

        async function loadMatches() {
    try {
        const response = await fetch('/.netlify/functions/fixtures');
        const data = await response.json();
        console.log(data);
        
        let matches = [];
        
        if (response.ok && data.response && data.response.length) {
            matches = data.response.slice(0, 10).map(match => ({
                homeTeam: { name: match.teams.home.name },
                awayTeam: { name: match.teams.away.name },
                utcDate: match.fixture.date,
                competition: { name: match.league.name },
                status: match.fixture.status.short
            }));
        }
        
        if (matches.length === 0) {
            matches = generateMockMatches();
        }
        
        displayPremiumMatches(matches.slice(0, 5));
        displayAllPredictions(matches.slice(5));
    } catch (error) {
        console.error('Error loading matches:', error);
        const mockMatches = generateMockMatches();
        displayPremiumMatches(mockMatches.slice(0, 5));
        displayAllPredictions(mockMatches.slice(5));
    }
}

        function generateMockMatches() {
            const teams = [
                'Manchester United', 'Liverpool', 'Chelsea', 'Arsenal', 'Manchester City',
                'Tottenham', 'West Ham', 'Leicester City', 'Everton', 'Newcastle',
                'Brighton', 'Crystal Palace', 'Brentford', 'Fulham', 'Wolves',
                'Barcelona', 'Real Madrid', 'Atletico Madrid', 'Sevilla', 'Valencia',
                'Bayern Munich', 'Borussia Dortmund', 'RB Leipzig', 'Bayer Leverkusen',
                'Juventus', 'AC Milan', 'Inter Milan', 'Napoli', 'Roma', 'Lazio'
            ];
            
            const matches = [];
            for (let i = 0; i < 12; i++) {
                const homeTeam = teams[Math.floor(Math.random() * teams.length)];
                let awayTeam = teams[Math.floor(Math.random() * teams.length)];
                while (awayTeam === homeTeam) {
                    awayTeam = teams[Math.floor(Math.random() * teams.length)];
                }
                
                matches.push({
                    homeTeam: { name: homeTeam },
                    awayTeam: { name: awayTeam },
                    utcDate: new Date().toISOString(),
                    competition: { name: 'Premier League' },
                    status: 'SCHEDULED'
                });
            }
            return matches;
        }

        function displayPremiumMatches(matches) {
            const container = document.getElementById('receiptMatches');
            
            if (matches.length === 0) {
                container.innerHTML = '<p style="color: #000; text-align: center;">No matches available for today.</p>';
                return;
            }
            
            // Take exactly 5 matches
            const selectedMatches = matches.slice(0, 3);
            
            let html = '';
            selectedMatches.forEach(match => {
                const odds = (Math.random() * 3 + 1.5).toFixed(2); // Individual odds
                
                html += `
                    <div class="receipt-match">
                        <div class="receipt-teams">${match.homeTeam.name} vs ${match.awayTeam.name}</div>
                        <div class="receipt-prediction">- -</div>
                        <div class="receipt-odds">fixed</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function displayAllPredictions(matches) {
            const container = document.getElementById('allPredictions');
            
            if (matches.length === 0) {
                container.innerHTML = '<p style="color: white; text-align: center;">No predictions available for today.</p>';
                return;
            }
            
            let html = '';
            matches.forEach(match => {
                const prediction = generatePrediction(match);
                const odds = generateOdds();
                
                html += `
                    <div class="prediction-card">
                        <div class="match-info">
                            <div class="teams">${match.homeTeam.name} vs ${match.awayTeam.name}</div>
                            <div class="prediction">${prediction.text}</div>
                        </div>
                        <div class="odds">
                            Odds: ${odds.home} | ${odds.draw} | ${odds.away}
                        </div>
                        <div style="margin-top: 10px; color: #666;">
                            <strong>Analysis:</strong> Based on recent form and statistical data
                        </div>
                        <div style="margin-top: 5px; color: #27ae60; font-weight: bold;">
                            Confidence: ${prediction.confidence}%
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Load matches when page loads
        window.addEventListener('load', loadMatches);
    </script>
</body>
</html>